"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const utils_1 = require("./utils");
exports.parseEpubAtPath = utils_1.parseEpubAtPath;
const performOperationOnBook = async (pathOrEpub, ignoreDrm, operation) => {
    let book;
    if (typeof pathOrEpub === 'string') {
        book = await utils_1.parseEpubAtPath(pathOrEpub);
    }
    else {
        book = pathOrEpub;
    }
    if (book.hasDRM() && !ignoreDrm) {
        return -1;
    }
    return operation(book, ignoreDrm);
};
/**
 * given a path to a valid epub file (or a file that's been parsed by `parseEpubAtPath`), return the word count
 */
exports.countWords = async (pathOrEpub, ignoreDrm = false) => performOperationOnBook(pathOrEpub, ignoreDrm, utils_1.countWordsInBook);
/**
 * given a path to a valid epub file (or a file that's been parsed by `parseEpubAtPath`), return the character count
 */
exports.countCharacters = async (pathOrEpub, ignoreDrm = false) => performOperationOnBook(pathOrEpub, ignoreDrm, utils_1.countCharactersInBook);
/**
 * given a path to a valid epub file (or a file that's been parsed by `parseEpubAtPath`), return all the text in the book
 */
exports.getText = async (pathOrEpub, ignoreDrm = false) => performOperationOnBook(pathOrEpub, ignoreDrm, utils_1.getTextFromBook);
